function showSearch(t,e,o){var n={};n.box=document.querySelector(t),n.input=n.box.querySelector("input"),n.btn=n.box.querySelector("dt"),n.search=n.box.querySelector("dd"),n.req=e,autoLoop=0,J(setRank,n,o),J(_ssEvent,n),J(_ssCommunication,n)}function setRank(t){var e,o,n=this,a=t.split("."),r=a.pop(),t=a.join(".");h.request(h.api.query_goods_list(r,{callback:function(a){var i;if(a.success){i=a.data.result;for(var u=0,c=i.length;c>u&&i[u].prodCode!=t;u++)e=i[u].prodCode;e=e?e:i[c-1].prodCode,o=i[u+1]?i[u+1].prodCode:i[0].prodCode,n.box.setAttribute("prv",e+"."+r),n.box.setAttribute("next",o+"."+r)}}}))}function locationGo(t,e,o){Event.stop(o);var n=t.getAttribute("data");code=e.getAttribute(n),tab=$_GET("tab")||1,window.location.href="?code="+encodeURIComponent(code)+"&tab="+tab}function _ssEvent(){var t=this;Event.add(t.btn,"click",function(e){var o=Event.target(e);return"default"==o.getAttribute("action")?locationGo(o,t.box,e):(Event.stop(e),t.search.style.display="block",t.input.focus(),void(autoLoop=1))}),Event.add(t.search,"click",function(e){var o=Event.target(e);return"default"==o.getAttribute("action")?locationGo(o,t.box,e):void Event.stop(e)}),Event.add(document,"click",function(){t.search.style.display="none",t.clear()})}function _ssCommunication(){var t,e=this;e.clear=function(){autoLoop=0,t=null},!function(){var o=arguments.callee,n=arguments;setTimeout(function(){o.apply(this,n)},500),autoLoop&&t!=e.input.value&&""!=e.input.value&&(t=e.input.value,h.request(h.api.query_wizard(t,e.req)))}()}