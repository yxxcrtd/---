function http(n){var t={};return J(_comm,t,n),J(_api,t,n),J(_render,t,n),t.request=function(n){t.jsonp(n)},t.post=function(n){t.ajax(n)},t.loop=function(n,a){var a=a||5e3,o=arguments;t.jsonp(n),setTimeout(function(){t.loop.apply(t,o)},a)},t}function _comm(n){var t=this,a=request();t.url=n||"http://172.32.1.218:8097",t.jsonp=function(n){a.jsonp({url:t.url+n.api,data:n.data,success:n.fn})},t.ajax=function(n){a.ajax({url:t.url+n.api,type:"POST",data:n.data,success:n.fn})}}function _api(){var n=this;n.api={notice_list:function(n,t,a,o,e){var c={};return c.limit=n,c.page=t,o&&(c.type=o),e&&(c.isHot=e),{api:"/api/content/gjs_notice_list",data:c,fn:a.callback||function(){}}},notice_content:function(n,t){var a={};return a.id=n,{api:"/api/content/gjs_notice",data:a,fn:t.callback||function(){}}},flash_list:function(n,t,a,o,e){var c={};return c.limit=n,c.page=t,o&&(c.type=o),e&&(c.isHot=e),{api:"/api/content/gjs_jin10_list",data:c,fn:a.callback||function(){}}},query_hot_goods:function(n){return{api:"/api/gjs_trade/queryHotGoodsList",data:{},fn:n.callback||function(){}}},query_goods_list:function(n,t){var a={};return a.exchange=n,a.dataType=0,{api:"/api/gjs_trade/queryGoodsList",data:a,fn:t.callback||function(){}}},query_lots_goods:function(n,t){return n.prodCode=encodeURIComponent(n.prodCode),{api:"/api/gjshq/snapshot/query",data:n,fn:t.callback||function(){}}},query_good:function(n,t){var a={};return a.prodCode=encodeURIComponent(n),{api:"/api/gjshq/ticker/query",data:a,fn:t.callback||function(){}}},query_history:function(n,t,a){var o={};return o.prodCode=encodeURIComponent(n),o.number=t,{api:"/api/gjshq/snapshot/tradeAmountQueryHistory",data:o,fn:a.callback||function(){}}},query_funds_njs:function(n,t){var a={};return a.token=n,a.exchange="NJS",{api:"/api/gjs_trade/queryNJSFunds",data:a,fn:t.callback||function(){}}},query_funds_sjs:function(n,t){var a={};return a.token=n,a.exchange="SJS",{api:"/api/gjs_trade/querySJSFunds",data:a,fn:t.callback||function(){}}},do_open_account_NJS:function(n,t){return{api:"/api/gjs_account/doOpenAccountNJS",data:n,fn:t.callback||function(){}}},query_fav_goods:function(n,t){var a={};return a.token=n,{api:"/api/gjshq/ownProduct/get",data:a,fn:t.callback||function(){}}},add_fav_goods:function(n,t,a,o){var e={};return e.token=n,e.exchange=encodeURIComponent(t),e.prodCode=encodeURIComponent(a),e.prodName="",{api:"/api/gjshq/ownProduct/save",data:e,fn:o.callback||function(){}}},del_fav_goods:function(n,t,a,o){var e={};return e.token=n,e.data=encodeURIComponent(JSON.stringify([{exchange:t,prodCode:a}])),{api:"/api/gjshq/ownProduct/delete",data:e,fn:o.callback||function(){}}},query_wizard:function(n,t){var a={};return a.field=encodeURIComponent(n),{api:"/api/gjshq/ownProduct/wizard",data:a,fn:t.callback||function(){}}},get_user_info:function(n,t){var a={};return a.token=encodeURIComponent(n),{api:"/api/user/get_user_info",data:a,fn:t.callback||function(){}}}}}function _render(){function n(){function n(){function n(n){u(n,t)}var t="k"+Math.ceil(1+1e10*Math.random());return{key:t,callback:n}}function t(){function n(n){n.success&&(n.data.content=n.data.content.replace(/class="[^"]+"/g,"")),u(n,t)}var t="k"+Math.ceil(1+1e10*Math.random());return{key:t,callback:n}}function e(){function n(){var n=localStorage.getItem("metalFav");return n?void a.loop(a.api.query_lots_goods({prodCode:n},r(t)),3e3):u({success:1,data:[]},t)}var t="k"+Math.ceil(1+1e10*Math.random());return{key:t,callback:n}}function c(){function n(n){var o,e=[];if(n.success){o=n.data.result||n.data;for(var c=0,i=o.length;i>c;c++)e.push(o[c].prodCode+"."+o[c].exchange);i?a.loop(a.api.query_lots_goods({prodCode:e.join(",")},r(t)),3e3):u({success:1,data:[]},t)}}var t="k"+Math.ceil(1+1e10*Math.random());return{key:t,callback:n}}function r(n){function t(t){u(t,n)}return{callback:t}}function i(n){console.log(n)}function u(n,t){var a=o[t].html.length;n.success?1==a&&(o[t].dom.innerHTML=rentmpl(o[t].html[0],{data:n.data.result||n.data})):i(n.msg)}return{omnipotent:n,noticeContent:t(),queryGoodsList:c(),queryLocalGoods:e()}}function t(n,t){var a=document.querySelector(n);scripts=a.querySelectorAll("script"),o[t]={dom:a,html:[]};for(var e=0,c=scripts.length;c>e;e++)o[t].html.push(scripts[e].innerHTML);return o[t]}var a=this,o={};a.plan=t,a.render=n()}